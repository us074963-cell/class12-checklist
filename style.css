:root{
  --bg:#ffffff; --card:#f7f7f9; --text:#111;
  --accent:#2563eb; --muted:#666; --radius:12px;
}
body.dark {
  --bg:#0b0c0f; --card:#0f1114; --text:#e9eef6; --muted:#9aa3b2;
}
*{box-sizing:border-box}
html,body{height:100%;}
body{
  margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans",sans-serif;
  background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased;
  padding:12px;
}
.topbar{
  display:flex; gap:12px; align-items:center; justify-content:space-between;
}
.topbar .left h1{margin:0;font-size:1.05rem}
.topbar .left .sub{margin:0;font-size:.78rem;color:var(--muted)}
.controls{display:flex;gap:8px;align-items:center}
.controls select, .controls input{
  padding:.5rem .6rem; border-radius:8px; border:1px solid rgba(0,0,0,.08);
  font-size:.95rem; min-width:120px;
  background:transparent; color:var(--text)
}
.controls input{flex:1; min-width:140px}
.controls button{
  padding:.45rem .6rem;border-radius:8px;border:none;background:transparent;font-size:1.05rem;cursor:pointer;
}
#progress{margin:12px 0 18px; display:flex;gap:12px;align-items:center}
#progress-bar{flex:1;height:10px;background:linear-gradient(90deg, rgba(0,0,0,0.04), rgba(0,0,0,0.02));border-radius:999px;overflow:hidden}
#progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#7c3aed);transition:width .25s}
#progress-text{min-width:68px;text-align:right;font-size:.9rem;color:var(--muted)}

.subject-card{
  background:var(--card); border-radius:var(--radius); padding:10px; margin-bottom:12px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.04);
}
.subject-card h2{margin:.3rem 0 .6rem; font-size:1rem}
.chapter-list details{margin-bottom:8px}
.chapter-list summary{
  cursor:pointer; padding:.6rem 0; font-weight:600; list-style:none;
  display:flex; justify-content:space-between; align-items:center;
}
.chapter-list ul{margin:6px 0 12px;padding-left:0; list-style:none}
.chapter-list li{display:flex; gap:10px; align-items:flex-start; padding:6px 8px;border-radius:8px}
.chapter-list li label{flex:1; font-size:.94rem; margin:0; padding-top:3px}
.chapter-list input[type="checkbox"]{transform:scale(1.05); margin-top:6px}

.small-muted{font-size:.78rem;color:var(--muted);padding-top:6px}

.footer{margin:18px 0 60px; text-align:center; color:var(--muted)}
@media(min-width:880px){
  .topbar{padding:0 24px}
  main{max-width:920px;margin:0 auto}
}
/* hide default triangle & add small arrow via CSS (keeps accessibility) */
details > summary { list-style: none; }
details > summary::-webkit-details-marker { display: none; }
details[open] > summary::after{ content:"▾"; color:var(--muted) }
details > summary::after{ content:"▸"; color:var(--muted) margin-left:8px }